# 二元化盐统计分析功能

## 功能概述

二元化盐统计分析功能是化盐工艺流程管理模块的重要组成部分，提供了全面的数据可视化和趋势分析能力。

## 主要功能

### 1. 数据概览
- **总化盐量统计**: 显示选定时间范围内的总化盐量
- **平均能耗分析**: 展示天然气和电量的平均消耗
- **人员配置统计**: 显示平均操作人数
- **配比合格率**: 计算符合6:4标准配比的记录比例

### 2. 趋势图表
- **盐类用量趋势**: 硝酸钠和硝酸钾的用量变化趋势
- **能耗趋势**: 天然气消耗和电量消耗的双轴趋势图
- **人员配置趋势**: 操作人数的变化情况
- **配比分析**: 实际配比与目标6:4配比的对比分析

### 3. 时间筛选
- **预设时间范围**: 最近7天、30天、3个月
- **自定义时间范围**: 支持用户自定义开始和结束日期
- **实时数据更新**: 根据筛选条件动态更新图表

### 4. 交互功能
- **图表工具栏**: 数据缩放、平移、重置等操作
- **全屏显示**: 支持图表全屏查看
- **数据导出**: 支持图表导出为PNG格式
- **响应式设计**: 适配不同屏幕尺寸

## 技术实现

### 技术栈
- **Vue 3.4.20**: 使用 Composition API 和 `<script setup>` 语法
- **TypeScript 4.9.5**: 提供完整的类型支持
- **ECharts 5.4.0**: 实现数据可视化
- **Element Plus 2.2.27**: UI组件库

### 组件结构
```
src/views/erp/saltprocess/records/binary/
├── index.vue                           # 主页面
├── components/
│   ├── BinaryStatistics.vue           # 统计分析组件
│   ├── EditForm.vue                   # 编辑表单
│   └── ImportDialog.vue               # 导入对话框
└── test-statistics.vue                # 测试页面
```

### 核心特性
1. **数据模拟**: 生成真实的模拟数据，包含周期性变化和随机波动
2. **错误处理**: 完善的错误处理机制和用户友好的错误提示
3. **加载状态**: 优雅的加载状态显示和交互反馈
4. **性能优化**: 图表懒加载和内存管理

## 使用方法

### 1. 访问功能
在系统中导航到：**化盐工艺流程 > 化盐记录 > 二元化盐记录**，点击"统计分析"按钮

### 2. 查看数据概览
- 页面顶部显示关键指标的概览卡片
- 包含数值、趋势方向和变化百分比

### 3. 分析趋势图表
- 四个主要图表展示不同维度的数据趋势
- 支持鼠标悬停查看详细数据
- 可以使用工具栏进行缩放和导航

### 4. 筛选数据
- 使用时间范围选择器筛选数据
- 支持按项目ID进行过滤
- 点击"查询"按钮应用筛选条件

### 5. 导出数据
- 点击"导出图表"按钮可将图表保存为PNG格式
- 支持高分辨率导出，适合报告使用

## 数据说明

### 配比标准
- **目标配比**: 硝酸钠:硝酸钾 = 6:4
- **正常范围**: 允许±5%的偏差
- **异常标识**: 超出正常范围的记录会在图表中特别标识

### 能耗计算
- **天然气消耗**: 约0.16-0.20 Nm³/kg盐
- **电量消耗**: 约0.11-0.15 KWh/kg盐
- **人员配置**: 通常5-10人/班次

## 更新记录

### v1.0.0 (2024-12-15)
- ✅ 完成基础统计分析功能
- ✅ 实现四类趋势图表
- ✅ 添加时间筛选功能
- ✅ 完善交互和响应式设计
- ✅ 集成错误处理和加载状态

## 后续规划

### v1.1.0
- 添加数据对比功能
- 支持多项目对比分析
- 增加预警阈值设置

### v1.2.0
- 集成实时数据源
- 添加自动报告生成
- 支持数据导出到Excel

## 技术支持

如有问题或建议，请联系开发团队。
