appId: com.haitang.admin
productName: 海棠企业管理系统
directories:
  buildResources: assets
  output: dist

files:
  # 编译后的源代码
  - from: out
    to: .
  # node_modules 依赖，排除文档和测试文件
  - from: node_modules
    to: node_modules
    filter:
      - '!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme,*.md}'
      - '!**/node_modules/*/{test,tests,*.test.js,*.spec.js}'
      - '!**/node_modules/*/{.eslintrc*,eslint*,prettier*,tslint*}'
      - '!**/node_modules/*/{.github,examples,docs,doc}'
  # 排除 docs 目录中的所有文件
  - '!docs/**/*'
  # 排除 src 目录中的文档文件
  - '!src/**/*.md'
  # 排除测试文件
  - '!src/**/*.test.js'
  - '!src/**/*.spec.js'
  - '!src/**/*.test.ts'
  - '!src/**/*.spec.ts'
  # 排除其他非源代码文件
  - '!**/*.test-export.js'
  - '!**/test-*.js'

win:
  target:
    - nsis
    - portable
  certificateFile: null
  certificatePassword: null

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: 海棠企业管理系统

mac:
  executableName: haitang-admin
  icon: assets/icon.icns
  target:
    - dmg
    - zip
  category: public.app-category.business
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  asarUnpack:
    - '**/*.node'
  extendInfo:
    CFBundleDisplayName: 海棠企业管理系统
    CFBundleName: haitang-admin
    NSPrincipalClass: NSApplication

# macOS 特定的构建优化选项
afterPack: scripts/afterPack.js

linux:
  target:
    - AppImage
    - deb
  category: Utility

# 通用构建选项
publish: null

