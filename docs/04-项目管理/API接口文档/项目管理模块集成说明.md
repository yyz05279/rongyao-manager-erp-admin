# 海棠企业管理系统 - 项目管理模块集成说明

## 概述

海棠企业管理系统中存在两个项目管理相关的模块，它们各自服务于不同的业务场景：

1. **盐化工艺项目管理模块** (`saltprocess/project`)
2. **通用项目管理模块** (`erp/project`)

## 模块对比

### 1. 盐化工艺项目管理模块 (`saltprocess/project`)

#### 功能定位
- **专业化工艺管理**：专门针对盐化工艺流程的项目管理
- **工艺流程集成**：与预热、化盐、提温等工艺模块深度集成
- **行业特定功能**：包含工艺参数配置、质量标准、设备监控等

#### 核心特性
- 工艺参数配置管理
- 质量标准和检验管理
- 设备状态监控集成
- 生产数据记录和分析
- 化盐工艺流程控制

#### 适用场景
- 盐化工艺生产项目
- 需要精确工艺控制的项目
- 与生产设备联动的项目
- 质量要求严格的化工项目

#### 路径和权限
```
路径: /saltprocess/project
权限前缀: erp:saltprocess:project:*
```

### 2. 通用项目管理模块 (`erp/project`)

#### 功能定位
- **通用项目管理**：适用于各种类型的企业项目
- **标准化管理**：提供标准的项目管理功能
- **团队协作**：强调团队协作和任务管理

#### 核心特性
- 项目全生命周期管理
- 团队成员和角色管理
- 任务分配和进度跟踪
- 里程碑和交付物管理
- 项目统计和报表分析

#### 适用场景
- IT项目开发
- 市场营销项目
- 行政管理项目
- 研发创新项目
- 一般性业务项目

#### 路径和权限
```
路径: /erp/project
权限前缀: erp:project:*
```

## 技术架构对比

### 数据模型差异

#### 盐化工艺项目模块
```typescript
interface SaltProjectVO {
  id: string;
  projectCode: string;
  projectName: string;
  projectType: ProjectType;        // 二元化盐/三元化盐
  status: ProjectStatus;
  processConfig?: ProcessConfig;   // 工艺配置
  qualityStandards?: QualityStandard[]; // 质量标准
  resourcePlan?: ResourcePlan;     // 资源计划
  // ... 工艺相关字段
}
```

#### 通用项目模块
```typescript
interface ProjectVO {
  id: string;
  projectCode: string;
  projectName: string;
  status: ProjectStatus;
  priority: ProjectPriority;       // 优先级
  progress: number;                // 进度百分比
  managerId: string;               // 项目经理
  departmentId: string;            // 所属部门
  memberCount: number;             // 成员数量
  taskCount: number;               // 任务数量
  // ... 通用管理字段
}
```

### API接口差异

#### 盐化工艺项目模块
```typescript
// 工艺相关接口
GET /erp/saltprocess/project/process-config
GET /erp/saltprocess/project/quality-standard
GET /erp/saltprocess/project/resource-plan

// 业务特定接口
PUT /erp/saltprocess/project/{id}/status
GET /erp/saltprocess/project/{id}/statistics
```

#### 通用项目模块
```typescript
// 成员管理接口
GET /erp/project/{id}/members
POST /erp/project/{id}/members
PUT /erp/project/{id}/members/{memberId}

// 任务管理接口
GET /erp/project/{id}/tasks
POST /erp/project/{id}/tasks
PUT /erp/project/{id}/tasks/{taskId}

// 里程碑管理接口
GET /erp/project/{id}/milestones
POST /erp/project/{id}/milestones
```

## 集成策略

### 1. 模块共存策略

两个模块可以在系统中共存，各自服务于不同的业务场景：

```typescript
// 路由配置
const routes = [
  // 盐化工艺项目管理
  {
    path: '/saltprocess',
    children: [
      { path: 'project', component: SaltProcessProject }
    ]
  },
  
  // 通用项目管理
  {
    path: '/erp/project',
    children: [
      { path: 'index', component: GeneralProject }
    ]
  }
];
```

### 2. 权限隔离策略

通过不同的权限前缀实现功能隔离：

```typescript
// 盐化工艺项目权限
const saltProcessPermissions = [
  'erp:saltprocess:project:list',
  'erp:saltprocess:project:add',
  'erp:saltprocess:project:edit'
];

// 通用项目权限
const generalProjectPermissions = [
  'erp:project:list',
  'erp:project:add',
  'erp:project:edit',
  'erp:project:member',
  'erp:project:task'
];
```

### 3. 数据隔离策略

使用不同的数据表和命名空间：

```sql
-- 盐化工艺项目表
CREATE TABLE `erp_salt_project` (...);
CREATE TABLE `erp_salt_project_config` (...);

-- 通用项目表
CREATE TABLE `erp_project` (...);
CREATE TABLE `erp_project_member` (...);
CREATE TABLE `erp_project_task` (...);
```

## 使用建议

### 1. 选择指南

#### 使用盐化工艺项目模块的情况：
- 涉及具体的盐化工艺生产
- 需要工艺参数精确控制
- 与生产设备有数据交互
- 有严格的质量标准要求

#### 使用通用项目模块的情况：
- 软件开发项目
- 市场推广项目
- 内部管理项目
- 研发创新项目
- 不涉及具体工艺流程的项目

### 2. 迁移策略

如果需要将现有项目从一个模块迁移到另一个模块：

```typescript
// 数据迁移示例
const migrateProject = async (sourceId: string, targetType: 'salt' | 'general') => {
  const sourceProject = await getSourceProject(sourceId);
  
  if (targetType === 'general') {
    // 从盐化工艺项目迁移到通用项目
    const generalProject = {
      projectName: sourceProject.projectName,
      description: sourceProject.description,
      managerId: sourceProject.managerId,
      startDate: sourceProject.startDate,
      endDate: sourceProject.endDate
      // 过滤掉工艺相关字段
    };
    
    await createGeneralProject(generalProject);
  }
};
```

### 3. 集成开发

在开发新功能时，需要明确功能归属：

```typescript
// 功能归属判断
const determineModule = (projectType: string) => {
  if (projectType.includes('salt') || projectType.includes('chemical')) {
    return 'saltprocess/project';
  } else {
    return 'erp/project';
  }
};
```

## 注意事项

### 1. 避免功能重复
- 不要在两个模块中实现相同的功能
- 如有共同需求，考虑抽取为公共组件

### 2. 保持接口一致性
- 相似功能的接口设计应保持一致
- 使用统一的错误处理和响应格式

### 3. 文档维护
- 及时更新各模块的文档
- 明确标注模块的适用场景

### 4. 测试策略
- 分别为两个模块编写独立的测试用例
- 确保模块间不会相互影响

## 总结

两个项目管理模块的共存是合理的架构设计，它们分别服务于不同的业务场景：

- **盐化工艺项目模块**：专业化、工艺化、设备集成
- **通用项目管理模块**：标准化、通用化、团队协作

通过合理的路径规划、权限控制和数据隔离，可以确保两个模块和谐共存，各自发挥最大价值。
