# 海棠企业管理系统 - 项目管理模块使用指南

## 概述

项目管理模块是海棠企业管理系统的核心功能模块之一，提供完整的项目生命周期管理功能，包括项目创建、成员管理、进度跟踪、任务分配、里程碑管理等。

## 功能特性

### 1. 项目全生命周期管理
- **项目创建**: 支持创建不同类型的项目，设置基本信息、预算、时间计划等
- **状态管理**: 支持草稿、规划中、已批准、进行中、暂停、已完成、已取消、已归档等状态
- **进度跟踪**: 实时跟踪项目进度，支持自动计算和手动更新
- **预算管控**: 预算设置、成本跟踪、预算执行分析

### 2. 团队协作管理
- **成员管理**: 添加/移除项目成员，分配角色和权限
- **角色权限**: 项目经理、技术负责人、开发人员、测试人员等预定义角色
- **工作量分配**: 支持成员工作量百分比设置和统计
- **协作沟通**: 项目内部沟通和协作功能

### 3. 任务与里程碑管理
- **任务分解**: 支持任务创建、分配、依赖关系设置
- **里程碑设置**: 关键节点管理，交付物跟踪
- **进度监控**: 任务进度实时更新，延期预警
- **工时统计**: 预估工时与实际工时对比分析

### 4. 数据分析与报表
- **项目统计**: 项目数量、完成率、延期率等关键指标
- **资源分析**: 人员利用率、设备使用情况分析
- **成本分析**: 预算执行情况、成本控制分析
- **导出功能**: 支持Excel、PDF格式的报表导出

## 快速开始

### 1. 环境准备

确保已安装以下依赖：
- Node.js 16+
- Vue 3.4+
- Element Plus 2.2+
- TypeScript 4.9+

### 2. 安装配置

1. **安装依赖**
```bash
npm install
```

2. **配置API接口**
```typescript
// src/api/erp/project/index.ts
import request from '@/utils/request';
// ... API接口配置
```

3. **配置路由**
```typescript
// src/router/modules/erp.ts
{
  path: '/erp/project',
  component: () => import('@/views/erp/project/index.vue'),
  name: 'ProjectManagement',
  meta: {
    title: '项目管理',
    icon: 'project',
    roles: ['admin', 'project_manager']
  }
}
```

4. **配置权限**
```typescript
// 权限配置
const permissions = [
  'erp:project:list',     // 查看项目列表
  'erp:project:add',      // 创建项目
  'erp:project:edit',     // 编辑项目
  'erp:project:remove',   // 删除项目
  'erp:project:export',   // 导出项目
  'erp:project:member',   // 成员管理
  'erp:project:task'      // 任务管理
];
```

### 3. 数据库初始化

执行数据库脚本：
```sql
-- 执行项目管理模块数据库脚本
source docs/database/project-management-schema.sql;
```

## 使用说明

### 1. 项目管理

#### 创建项目
1. 点击"新增项目"按钮
2. 填写项目基本信息：
   - 项目名称（必填）
   - 项目描述
   - 优先级（低/中/高/紧急）
   - 项目经理（必填）
   - 所属部门（必填）
   - 开始日期（必填）
   - 计划结束日期
   - 项目预算
   - 项目标签

3. 点击"确定"保存项目

#### 编辑项目
1. 在项目列表中点击"编辑"按钮
2. 修改项目信息
3. 点击"确定"保存修改

#### 项目状态管理
项目支持以下状态流转：
```
草稿 → 规划中 → 已批准 → 进行中 → 已完成
                    ↓
                  暂停 → 进行中
                    ↓
                  已取消
```

### 2. 成员管理

#### 添加成员
1. 在项目列表中点击"成员管理"按钮
2. 点击"添加成员"
3. 选择用户和角色
4. 设置工作量百分比
5. 点击"确定"添加

#### 角色说明
- **项目经理**: 拥有项目的全部管理权限
- **技术负责人**: 负责技术方案和开发管理
- **开发人员**: 负责具体的开发工作
- **测试人员**: 负责质量保证工作
- **业务分析师**: 负责需求分析和设计
- **观察者**: 只能查看项目信息

### 3. 任务管理

#### 创建任务
1. 进入项目详情页面
2. 点击"任务管理"标签
3. 点击"新增任务"
4. 填写任务信息：
   - 任务名称（必填）
   - 任务描述
   - 优先级
   - 负责人
   - 计划开始/结束日期
   - 预估工时
   - 依赖任务
   - 任务标签

#### 任务状态
- **待办**: 任务已创建但未开始
- **进行中**: 任务正在执行
- **审核中**: 任务已完成待审核
- **已完成**: 任务已完成并通过审核
- **已取消**: 任务被取消

### 4. 里程碑管理

#### 创建里程碑
1. 进入项目详情页面
2. 点击"里程碑"标签
3. 点击"新增里程碑"
4. 填写里程碑信息：
   - 里程碑名称（必填）
   - 描述
   - 计划日期（必填）
   - 依赖里程碑
   - 交付物列表

### 5. 进度跟踪

#### 自动进度计算
系统会根据以下规则自动计算项目进度：
- 任务进度权重：70%
- 里程碑进度权重：30%
- 最终进度 = 任务平均进度 × 0.7 + 里程碑平均进度 × 0.3

#### 手动更新进度
项目经理可以手动调整项目进度：
1. 进入项目详情页面
2. 点击"更新进度"按钮
3. 输入新的进度百分比
4. 点击"确定"保存

## API接口使用

### 基础用法
```typescript
import { listProject, createProject, updateProject } from '@/api/erp/project';

// 查询项目列表
const getProjectList = async () => {
  const { data } = await listProject({
    pageNum: 1,
    pageSize: 10,
    status: 'IN_PROGRESS'
  });
  return data;
};

// 创建项目
const createNewProject = async (projectData) => {
  const { data } = await createProject(projectData);
  return data;
};
```

### 权限控制
```vue
<template>
  <!-- 使用v-hasPermi指令控制按钮显示 -->
  <el-button 
    type="primary" 
    @click="handleAdd"
    v-hasPermi="['erp:project:add']"
  >
    新增项目
  </el-button>
</template>
```

## 最佳实践

### 1. 项目规划
- 合理设置项目里程碑，建议每个里程碑周期不超过4周
- 任务分解要足够细化，单个任务工时建议不超过40小时
- 设置合理的任务依赖关系，避免循环依赖

### 2. 团队管理
- 根据项目规模合理配置团队成员
- 明确角色职责，避免权限冲突
- 定期检查成员工作量分配，确保资源合理利用

### 3. 进度管控
- 建立定期进度汇报机制
- 及时识别和处理项目风险
- 使用项目仪表板监控关键指标

### 4. 数据管理
- 定期备份项目数据
- 建立项目归档流程
- 保持数据的一致性和完整性

## 故障排除

### 常见问题

1. **项目列表加载失败**
   - 检查API接口配置
   - 确认用户权限设置
   - 查看网络连接状态

2. **成员添加失败**
   - 确认用户是否存在
   - 检查角色权限配置
   - 验证数据格式是否正确

3. **进度更新异常**
   - 检查任务状态是否正确
   - 确认里程碑设置是否合理
   - 验证计算逻辑是否正确

### 日志查看
```bash
# 查看应用日志
tail -f logs/application.log

# 查看错误日志
tail -f logs/error.log
```

## 技术支持

如遇到技术问题，请联系：
- 技术支持邮箱：support@haitang.com
- 技术文档：https://docs.haitang.com
- 问题反馈：https://github.com/haitang/issues

## 版本更新

### v1.0.0 (2024-03-15)
- 初始版本发布
- 支持基础项目管理功能
- 完整的API接口和文档

### 后续规划
- v1.1.0: 增加甘特图功能
- v1.2.0: 支持项目模板
- v1.3.0: 集成工时管理
- v2.0.0: 支持多项目组合管理
