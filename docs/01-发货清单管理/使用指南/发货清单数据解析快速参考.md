# 发货清单数据解析 - 快速参考

## 一分钟快速开始

### 1. 导入工具

```typescript
import {
  parseShippingListPageResponse,
  parseShippingListVO,
  formatWeight,
  formatVolume,
  getStatusTagType,
  getFullPhotoUrls
} from '@/api/erp/saltprocess/shipping';
```

### 2. 解析列表数据

```typescript
// 查询列表
const response = await listShippingList(query);

// 解析数据
const pageData = parseShippingListPageResponse(response.data);

// 使用数据
dataList.value = pageData.records;
total.value = pageData.total;
```

### 3. 解析详情数据

```typescript
// 查询详情
const response = await getShippingList(id);

// 解析数据
const shippingList = parseShippingListVO(response.data);

// 直接使用增强字段
console.log(shippingList.vehiclePlate);     // 车牌号
console.log(shippingList.driverName);       // 司机姓名
console.log(shippingList.statusName);       // 状态名称
```

## 常用工具函数

| 函数                    | 用途         | 示例                                       |
| ----------------------- | ------------ | ------------------------------------------ |
| `parseShippingListVO()` | 解析单个清单 | `parseShippingListVO(data)`                |
| `formatWeight()`        | 格式化重量   | `formatWeight(1500.5)` → "1,500.50 kg"     |
| `formatVolume()`        | 格式化体积   | `formatVolume(12.8)` → "12.80 m³"          |
| `getStatusTagType()`    | 获取状态标签 | `getStatusTagType('DRAFT')` → "info"       |
| `getFullPhotoUrls()`    | 生成完整 URL | `getFullPhotoUrls(['/path/to/photo.jpg'])` |

## 后端数据结构

```json
{
  "total": 1,
  "rows": [{
    "id": "1983722956655599617",
    "status": "DRAFT",
    "statusDesc": "草稿",
    "vehiclePlate": "苏NHA923",
    "vehicleDescription": "17.5米车",
    "driverName": "李猛",
    "driverPhone": "18036946111",
    "shippingPhotoUrls": ["..."],
    "mechanicalCount": 10,
    "electricalCount": 5
  }],
  "code": 200,
  "msg": "查询成功"
}
```

## 模板使用示例

```vue
<template>
  <div>
    <!-- 状态标签 -->
    <el-tag :type="getStatusTagType(item.status)">
      {{ item.statusName }}
    </el-tag>

    <!-- 重量显示 -->
    <span>{{ formatWeight(item.totalWeight) }}</span>

    <!-- 照片预览 -->
    <el-image
      v-for="url in getFullPhotoUrls(item.shippingPhotoUrls)"
      :src="url"
    />
  </div>
</template>

<script setup lang="ts">
import {
  parseShippingListVO,
  formatWeight,
  getStatusTagType,
  getFullPhotoUrls
} from '@/api/erp/saltprocess/shipping';
</script>
```

## 增强字段说明

| 字段                     | 类型     | 说明              |
| ------------------------ | -------- | ----------------- |
| `vehiclePlate`           | string   | 车牌号            |
| `vehicleDescription`     | string   | 车辆描述          |
| `driverName`             | string   | 司机姓名          |
| `driverPhone`            | string   | 司机电话          |
| `shippingPhotoUrls`      | string[] | 发货照片 URL 数组 |
| `driverLicensePhotoUrls` | string[] | 驾照照片 URL 数组 |
| `statusDesc`             | string   | 状态描述          |
| `shippingMethodDesc`     | string   | 发货方式描述      |
| `mechanicalCount`        | number   | 机械设备数量      |
| `electricalCount`        | number   | 电控设备数量      |
| `pipelineCount`          | number   | 管路设备数量      |

## 完整文档

详细文档请查看：

- [发货清单详情数据解析方案.md](./发货清单详情数据解析方案.md)
- [发货清单数据解析使用示例.vue](./发货清单数据解析使用示例.vue)

## 源码位置

- 类型定义：`src/api/erp/saltprocess/shipping/types.ts`
- 解析工具：`src/api/erp/saltprocess/shipping/data-parser.ts`
- API 接口：`src/api/erp/saltprocess/shipping/index.ts`
