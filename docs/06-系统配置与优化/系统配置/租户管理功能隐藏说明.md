# 租户管理功能隐藏说明

## 概述

本文档说明了海棠企业管理系统中租户管理功能的隐藏实现和重新启用方法。

## 隐藏的功能模块

### 1. 登录和注册页面
- **文件位置**: `src/views/login.vue`, `src/views/register.vue`
- **隐藏内容**: 租户选择下拉框、租户相关表单验证
- **实现方式**: 注释HTML模板、禁用tenantEnabled开关、注释API调用

### 2. 系统管理路由
- **文件位置**: `src/store/modules/permission.ts`
- **隐藏内容**: 租户管理和租户套餐管理路由
- **实现方式**: 在路由过滤函数中添加过滤逻辑

### 3. 租户管理页面
- **文件位置**: `src/views/system/tenant/index.vue`
- **隐藏内容**: 整个租户管理界面
- **实现方式**: 条件渲染显示功能不可用提示

### 4. 租户套餐管理页面
- **文件位置**: `src/views/system/tenantPackage/index.vue`
- **隐藏内容**: 整个租户套餐管理界面
- **实现方式**: 条件渲染显示功能不可用提示

### 5. 导航栏租户切换
- **文件位置**: `src/layout/components/Navbar.vue`
- **隐藏内容**: 租户切换下拉框和相关功能
- **实现方式**: 注释HTML模板、禁用tenantEnabled开关、注释相关函数

### 6. 首页统计数据
- **文件位置**: `src/views/index.vue`
- **隐藏内容**: 租户管理相关的功能计数
- **实现方式**: 从计划功能列表中移除租户管理，调整统计数字

## 重新启用方法

### 1. 恢复登录和注册页面

**src/views/login.vue**:
```typescript
// 1. 取消租户选择框的注释
// 2. 恢复租户验证规则
const loginRules: ElFormRules = {
  tenantId: [{ required: true, trigger: "blur", message: "请输入您的租户编号" }], // 取消注释
  // ...
};

// 3. 启用租户功能
const tenantEnabled = ref(true); // 改为 true

// 4. 恢复租户相关函数
const initTenantList = async () => {
  // 取消注释
};

// 5. 恢复localStorage操作
// 取消相关localStorage操作的注释
```

**src/views/register.vue**:
```typescript
// 1. 取消租户选择框的注释
// 2. 恢复租户验证规则和相关函数
// 3. 启用租户功能开关
const tenantEnabled = ref(true); // 改为 true
```

### 2. 恢复路由显示

**src/store/modules/permission.ts**:
```typescript
const filterAsyncRouter = (asyncRouterMap: RouteOption[], lastRouter?: RouteOption, type = false): RouteOption[] => {
  return asyncRouterMap.filter((route) => {
    // 注释掉租户路由过滤逻辑
    // if (route.path === '/system/tenant' || 
    //     route.path === '/system/tenantPackage' ||
    //     route.path === 'tenant' || 
    //     route.path === 'tenantPackage' ||
    //     (route.meta && (route.meta.title === '租户管理' || route.meta.title === '租户套餐管理'))) {
    //   return false;
    // }
    
    // ... 其余代码保持不变
  });
};

const filterChildren = (childrenMap: RouteOption[], lastRouter?: RouteOption): RouteOption[] => {
  // 同样注释掉租户路由过滤逻辑
};
```

### 3. 恢复页面组件

**src/views/system/tenant/index.vue**:
```typescript
// 1. 禁用功能隐藏标志
const tenantFeatureDisabled = ref(false); // 改为 false

// 2. 或者直接移除条件渲染，恢复原始模板结构
```

**src/views/system/tenantPackage/index.vue**:
```typescript
// 同样的操作
const tenantPackageFeatureDisabled = ref(false); // 改为 false
```

### 4. 恢复导航栏功能

**src/layout/components/Navbar.vue**:
```typescript
// 1. 取消租户切换组件的注释
// 2. 恢复相关导入
import { getTenantList } from "@/api/login";
import { dynamicClear, dynamicTenant } from "@/api/system/tenant";

// 3. 启用租户功能
const tenantEnabled = ref(true); // 改为 true

// 4. 恢复相关函数
const dynamicTenantEvent = async (tenantId: string) => {
  // 取消注释
};

const initTenantList = async () => {
  // 取消注释
};

// 5. 恢复defineExpose
defineExpose({
  initTenantList,
});
```

### 5. 恢复首页统计

**src/views/index.vue**:
```typescript
// 1. 恢复统计数据
const overviewData = ref({
  completedFeatures: 25,
  developingFeatures: 8,
  plannedFeatures: 12, // 恢复为 12
  totalModules: 3
});

// 2. 恢复计划功能列表
plannedFunctions: [
  { name: '岗位管理', version: 'v1.1.0' },
  { name: '租户管理', version: 'v1.2.0' } // 取消注释
]
```

## 注意事项

1. **代码完整性**: 所有租户相关的API接口代码都被保留，只是前端不再调用
2. **数据库**: 后端数据库中的租户相关表结构和数据不受影响
3. **权限配置**: 后端的租户权限配置可能需要相应调整
4. **测试**: 重新启用后需要进行完整的功能测试

## 技术实现总结

本次隐藏采用了以下技术手段：
- 条件渲染控制页面显示
- 路由过滤隐藏菜单项
- 注释代码保持完整性
- 配置开关控制功能启用

这种实现方式确保了：
- 功能完全隐藏，用户无法访问
- 代码结构完整，便于后续恢复
- 不影响其他功能模块的正常运行
- 重新启用过程简单明确

## 更新日期

2024-03-01 - 初始版本，完成租户管理功能隐藏
