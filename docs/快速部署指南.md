# 快速部署指南

## 🚀 30 秒快速开始

### 方案一：静态服务器（推荐）

```bash
# 1. 构建项目
npm run build:prod

# 2. 启动服务器
npm run serve:dist

# 3. 浏览器访问
# http://localhost:8080
```

**或使用脚本：**

```bash
# macOS/Linux
chmod +x bin/start-server.sh
./bin/start-server.sh

# Windows
bin/start-server.bat
```

---

## 📦 完整部署步骤

### 前置要求

- ✅ Node.js 14+ 已安装
- ✅ npm 或 yarn 已安装

### 步骤 1：构建项目

```bash
cd /path/to/haitang-web-admin
npm install          # 如果还未安装依赖
npm run build:prod   # 构建生产版本
```

**输出：** `dist/` 文件夹包含所有打包文件

### 步骤 2：选择运行方式

#### 方式 A：使用 http-server

```bash
# 全局安装（一次性）
npm install -g http-server

# 运行
cd dist
http-server -p 8080 -o
```

#### 方式 B：使用 Vite 预览

```bash
npm run preview
```

#### 方式 C：使用脚本

```bash
# macOS/Linux
./bin/start-server.sh

# Windows
bin/start-server.bat
```

#### 方式 D：使用 Docker

```bash
# 构建镜像
docker build -t haitang-admin:latest .

# 运行容器
docker run -p 8080:8080 haitang-admin:latest

# 或使用 docker-compose
docker-compose up -d
```

---

## 🔧 常见场景

### 场景 1：在另一台电脑上运行

**前置条件：** 另一台电脑已安装 Node.js

```bash
# 在源电脑
npm run build:prod
# 将 dist 文件夹复制到另一台电脑

# 在目标电脑
npm install -g http-server
cd dist
http-server -p 8080
```

### 场景 2：修改 API 地址

```bash
# 构建时指定 API 地址
VITE_APP_BASE_API=http://your-api-server:8080 npm run build:prod
```

### 场景 3：在不同端口运行

```bash
# 使用 http-server
cd dist
http-server -p 9000

# 或使用脚本
./bin/start-server.sh 9000
```

### 场景 4：Docker 部署

```bash
# 构建镜像
docker build -t haitang-admin:1.0.0 .

# 运行
docker run -d -p 8080:8080 --name haitang haitang-admin:1.0.0

# 查看日志
docker logs -f haitang

# 停止
docker stop haitang
```

---

## 📋 命令速查表

| 命令 | 功能 |
|------|------|
| `npm run dev` | 开发模式 |
| `npm run build:prod` | 生产构建 |
| `npm run preview` | 预览构建结果 |
| `npm run serve:dist` | 启动服务器 |
| `npm run lint` | 代码检查 |
| `npm run prettier` | 代码格式化 |

---

## 🐳 Docker 命令速查表

```bash
# 构建镜像
docker build -t haitang-admin:latest .

# 运行容器
docker run -p 8080:8080 haitang-admin:latest

# 后台运行
docker run -d -p 8080:8080 --name haitang haitang-admin:latest

# 查看日志
docker logs -f haitang

# 进入容器
docker exec -it haitang sh

# 停止容器
docker stop haitang

# 删除容器
docker rm haitang

# 删除镜像
docker rmi haitang-admin:latest

# 使用 docker-compose
docker-compose up -d      # 启动
docker-compose logs -f    # 查看日志
docker-compose down       # 停止
```

---

## ✅ 验证部署

访问以下地址验证部署成功：

```
http://localhost:8080
```

**预期结果：**
- ✅ 页面正常加载
- ✅ 菜单正常显示
- ✅ 可以登录系统

---

## 🆘 常见问题

### Q: 端口 8080 已被占用？

```bash
# 使用其他端口
http-server dist -p 8081
```

### Q: 如何在生产环境中使用？

推荐使用 nginx 或 Docker：

```bash
# Docker 方案
docker-compose up -d
```

### Q: 如何处理 API 请求？

API 地址在构建时已配置，如需修改：

```bash
VITE_APP_BASE_API=http://new-api-url npm run build:prod
```

### Q: 如何查看构建日志？

```bash
npm run build:prod 2>&1 | tee build.log
```

---

## 📚 详细文档

更多详细信息请参考：[打包部署方案.md](./打包部署方案.md)

---

## 💡 最佳实践

1. **总是使用 `npm run build:prod`** 而不是 `npm run build`
2. **在生产环境中启用 gzip 压缩**
3. **使用 Docker 进行标准化部署**
4. **定期更新依赖包**
5. **在部署前进行充分测试**

---

## 📞 获取帮助

如遇到问题，请：

1. 检查 Node.js 版本：`node --version`
2. 检查 npm 版本：`npm --version`
3. 查看构建日志
4. 参考详细文档：[打包部署方案.md](./打包部署方案.md)

