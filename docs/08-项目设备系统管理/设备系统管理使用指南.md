# 设备系统管理模块 - 使用指南

## 文档信息

- **版本**: v1.0
- **更新日期**: 2025-11-07
- **适用范围**: 海棠企业管理系统 - 化盐项目设备系统管理

---

## 目录

1. [模块概述](#1-模块概述)
2. [菜单权限配置](#2-菜单权限配置)
3. [设备系统模板管理](#3-设备系统模板管理)
4. [项目设备系统管理](#4-项目设备系统管理)
5. [最佳实践](#5-最佳实践)
6. [常见问题](#6-常见问题)

---

## 1. 模块概述

### 1.1 功能简介

设备系统管理模块是化盐项目管理系统的核心功能模块之一，主要用于管理化盐处理厂的设备系统配置和项目设备系统实例。

### 1.2 核心功能

- **设备系统模板管理**: 创建和管理可复用的设备系统模板
- **项目设备系统管理**: 基于模板或自定义创建项目设备系统
- **系统类型支持**: 固态、液态、粉盐、燃烧器四种类型
- **标准模板**: 支持标准模板快速创建项目设备系统
- **状态管理**: 完整的生命周期状态管理

### 1.3 业务流程

```
设备系统模板创建 → 模板发布 → 项目设备系统创建 → 系统配置 → 系统激活 → 系统完成 → 系统归档
```

---

## 2. 菜单权限配置

### 2.1 菜单结构

```
化盐工艺流程管理
  └─ 设备系统管理
       ├─ 设备系统模板管理
       └─ 项目设备系统管理
```

### 2.2 设备系统模板管理权限

| 权限标识                                         | 权限名称     | 说明                 |
| ------------------------------------------------ | ------------ | -------------------- |
| `erp:saltprocess:equipmentSystemTemplate:list`   | 查询模板列表 | 查看设备系统模板列表 |
| `erp:saltprocess:equipmentSystemTemplate:query`  | 查询模板详情 | 查看设备系统模板详情 |
| `erp:saltprocess:equipmentSystemTemplate:add`    | 新增模板     | 创建新的设备系统模板 |
| `erp:saltprocess:equipmentSystemTemplate:edit`   | 修改模板     | 编辑已有设备系统模板 |
| `erp:saltprocess:equipmentSystemTemplate:remove` | 删除模板     | 删除设备系统模板     |
| `erp:saltprocess:equipmentSystemTemplate:export` | 导出模板     | 导出设备系统模板列表 |

### 2.3 项目设备系统管理权限

| 权限标识                                        | 权限名称         | 说明                 |
| ----------------------------------------------- | ---------------- | -------------------- |
| `erp:saltprocess:projectEquipmentSystem:list`   | 查询设备系统列表 | 查看项目设备系统列表 |
| `erp:saltprocess:projectEquipmentSystem:query`  | 查询设备系统详情 | 查看项目设备系统详情 |
| `erp:saltprocess:projectEquipmentSystem:add`    | 新增设备系统     | 创建新的项目设备系统 |
| `erp:saltprocess:projectEquipmentSystem:edit`   | 修改设备系统     | 编辑已有项目设备系统 |
| `erp:saltprocess:projectEquipmentSystem:remove` | 删除设备系统     | 删除项目设备系统     |
| `erp:saltprocess:projectEquipmentSystem:export` | 导出设备系统     | 导出项目设备系统列表 |

### 2.4 菜单配置示例

#### 2.4.1 设备系统模板管理菜单

```json
{
  "menuName": "设备系统模板管理",
  "menuType": "C",
  "path": "equipment-system-template",
  "component": "erp/saltprocess/equipment-system/template/index",
  "perms": "erp:saltprocess:equipmentSystemTemplate:list",
  "icon": "component",
  "orderNum": 1
}
```

#### 2.4.2 项目设备系统管理菜单

```json
{
  "menuName": "项目设备系统管理",
  "menuType": "C",
  "path": "project-equipment-system",
  "component": "erp/saltprocess/equipment-system/index",
  "perms": "erp:saltprocess:projectEquipmentSystem:list",
  "icon": "list",
  "orderNum": 2
}
```

---

## 3. 设备系统模板管理

### 3.1 创建设备系统模板

#### 操作步骤

1. 进入"设备系统模板管理"页面
2. 点击"新增模板"按钮
3. 填写模板信息：
   - **模板编码**: 系统自动生成
   - **模板名称**: 必填，如"固态处理厂标准模板"
   - **系统类型**: 必填，选择固态/液态/粉盐/燃烧器
   - **分类**: 可选，如"处理厂"、"生产线"
   - **版本号**: 可选，如"1.0"
   - **状态**: 选择草稿/启用/归档
   - **标准模板**: 勾选后可作为标准模板使用
   - **描述**: 可选，详细描述模板用途
   - **备注**: 可选，其他备注信息
4. 点击"确定"保存

#### 字段说明

| 字段     | 必填 | 说明                                                 |
| -------- | ---- | ---------------------------------------------------- |
| 模板编码 | 否   | 系统自动生成，唯一标识                               |
| 模板名称 | 是   | 模板名称，建议包含系统类型和用途                     |
| 系统类型 | 是   | SOLID(固态)/LIQUID(液态)/POWDER(粉盐)/BURNER(燃烧器) |
| 分类     | 否   | 模板分类，便于管理                                   |
| 版本号   | 否   | 版本标识，如"1.0"                                    |
| 状态     | 是   | DRAFT(草稿)/ACTIVE(启用)/ARCHIVED(归档)              |
| 标准模板 | 否   | 是否作为标准模板，标准模板可快速创建项目设备系统     |
| 描述     | 否   | 模板详细描述                                         |
| 备注     | 否   | 其他备注信息                                         |

### 3.2 发布模板

草稿状态的模板需要发布后才能用于创建项目设备系统。

#### 操作步骤

1. 在模板列表中找到草稿状态的模板
2. 点击操作栏的"发布"按钮
3. 确认发布操作
4. 模板状态变更为"启用"

### 3.3 复制模板

可以基于现有模板快速创建新模板。

#### 操作步骤

1. 在模板列表中找到需要复制的模板
2. 点击操作栏的"复制"按钮
3. 系统自动创建副本，状态为"草稿"
4. 可对副本进行修改后发布

### 3.4 查看模板详情

#### 操作步骤

1. 点击模板行或操作栏的"查看详情"按钮
2. 查看模板完整信息：
   - 基本信息
   - 统计数据（子系统数量、子项数、物料数、重量）
   - 创建和更新信息

### 3.5 修改模板

#### 操作步骤

1. 点击操作栏的"编辑"按钮
2. 修改模板信息
3. 点击"确定"保存

> **注意**: 启用状态的模板可以修改，但建议谨慎操作，因为可能影响已创建的项目设备系统。

### 3.6 删除模板

#### 操作步骤

1. 选择要删除的模板（可多选）
2. 点击"删除"按钮
3. 确认删除操作

> **警告**: 删除模板是不可逆操作，请谨慎操作。建议使用"归档"功能替代删除。

### 3.7 导出模板

#### 操作步骤

1. 设置筛选条件（可选）
2. 点击"导出"按钮
3. 系统生成 Excel 文件并下载

---

## 4. 项目设备系统管理

### 4.1 创建项目设备系统

#### 4.1.1 手动创建

1. 进入"项目设备系统管理"页面
2. 点击"新增设备系统"按钮
3. 填写设备系统信息：
   - **系统编码**: 系统自动生成
   - **系统名称**: 必填，如"XX 项目固态处理厂"
   - **项目 ID**: 必填，关联的项目 ID
   - **项目名称**: 必填，项目名称
   - **系统类型**: 必填，选择固态/液态/粉盐/燃烧器
   - **分类**: 可选
   - **模板 ID**: 可选，从模板创建时填写
   - **状态**: 选择草稿/活跃/已完成/已归档
   - **负责人**: 可选，填写负责人 ID 和姓名
   - **优先级**: 可选，1-10，数字越大优先级越高
   - **描述**: 可选
   - **备注**: 可选
4. 点击"确定"保存

#### 4.1.2 从模板创建（推荐）

> **待开发功能**: 此功能将在后续版本中提供，可直接从模板快速创建项目设备系统并自动复制子系统、子项和物料配置。

### 4.2 设备系统状态管理

#### 4.2.1 状态流转

```
草稿 → 活跃 → 已完成 → 已归档
```

#### 4.2.2 状态说明

| 状态   | 说明                     | 可转换状态     |
| ------ | ------------------------ | -------------- |
| 草稿   | 初始创建状态，可自由编辑 | 活跃、已归档   |
| 活跃   | 项目进行中，正常使用     | 已完成、已归档 |
| 已完成 | 项目已完成，不可修改     | 已归档         |
| 已归档 | 已归档，不可修改         | -              |

#### 4.2.3 更改状态

1. 在设备系统列表中找到目标设备系统
2. 点击操作栏的"更多"按钮
3. 选择目标状态：
   - 激活：将草稿状态改为活跃
   - 完成：将活跃状态改为已完成
   - 归档：归档设备系统
4. 确认操作

### 4.3 复制设备系统

可以基于现有设备系统快速创建新的设备系统。

#### 操作步骤

1. 在设备系统列表中找到需要复制的设备系统
2. 点击操作栏的"复制"按钮
3. 系统自动创建副本，状态为"草稿"
4. 可对副本进行修改后激活

### 4.4 查看设备系统详情

#### 操作步骤

1. 点击设备系统行或操作栏的"查看详情"按钮
2. 查看设备系统完整信息：
   - 基本信息
   - 项目信息
   - 统计数据
   - 负责人信息
   - 创建和更新信息

### 4.5 修改设备系统

#### 操作步骤

1. 点击操作栏的"编辑"按钮
2. 修改设备系统信息
3. 点击"确定"保存

> **注意**: 已完成和已归档状态的设备系统不允许修改。

### 4.6 删除设备系统

#### 操作步骤

1. 选择要删除的设备系统（可多选）
2. 点击"删除"按钮
3. 确认删除操作

> **警告**: 删除设备系统会同时删除关联的子系统、子项和物料数据，请谨慎操作。

### 4.7 导出设备系统

#### 操作步骤

1. 设置筛选条件（可选）
2. 点击"导出"按钮
3. 系统生成 Excel 文件并下载

---

## 5. 最佳实践

### 5.1 模板管理

1. **标准模板**: 为常用配置创建标准模板，提高效率
2. **版本管理**: 使用版本号管理模板演进
3. **命名规范**: 模板名称应包含系统类型和用途，如"固态处理厂标准模板 v1.0"
4. **分类管理**: 合理使用分类字段，便于模板查找和管理

### 5.2 项目设备系统管理

1. **从模板创建**: 优先使用标准模板创建项目设备系统
2. **及时更新状态**: 根据项目进度及时更新设备系统状态
3. **负责人制**: 为每个设备系统指定负责人
4. **优先级管理**: 合理设置优先级，便于资源调度

### 5.3 数据维护

1. **定期清理**: 定期归档已完成的设备系统
2. **数据备份**: 定期导出重要数据进行备份
3. **权限管理**: 合理分配权限，避免误操作

---

## 6. 常见问题

### 6.1 为什么无法发布模板？

**可能原因**:

- 模板信息不完整
- 缺少发布权限

**解决方案**:

- 检查必填字段是否完整
- 联系管理员分配发布权限

### 6.2 如何将草稿状态的设备系统改为活跃？

**解决方案**:

- 在设备系统列表中，点击操作栏的"更多"按钮
- 选择"激活"选项

### 6.3 已完成的设备系统能否修改？

**解决方案**:

- 已完成状态的设备系统不允许直接修改
- 如需修改，可以复制后修改副本
- 或联系管理员将状态改回活跃状态

### 6.4 如何快速创建项目设备系统？

**解决方案**:

- 推荐使用标准模板创建
- 或复制已有的设备系统进行修改

### 6.5 删除模板会影响已创建的项目设备系统吗？

**解决方案**:

- 删除模板不会影响已创建的项目设备系统
- 但不建议删除正在使用的模板
- 建议使用归档功能替代删除

### 6.6 系统类型有什么用？

**解决方案**:

- 系统类型用于标识设备系统的类型（固态/液态/粉盐/燃烧器）
- 不同类型可能有不同的子系统、子项和物料配置
- 可以根据系统类型筛选和统计

---

## 附录

### A. 系统类型说明

| 类型   | 值     | 说明         |
| ------ | ------ | ------------ |
| 固态   | SOLID  | 固态处理厂   |
| 液态   | LIQUID | 液态处理厂   |
| 粉盐   | POWDER | 粉盐处理系统 |
| 燃烧器 | BURNER | 燃烧器系统   |

### B. 状态说明

#### 模板状态

| 状态 | 值       | 说明                           |
| ---- | -------- | ------------------------------ |
| 草稿 | DRAFT    | 初始创建状态，可自由编辑       |
| 启用 | ACTIVE   | 已启用，可用于创建项目设备系统 |
| 归档 | ARCHIVED | 已归档，不可修改               |

#### 项目设备系统状态

| 状态   | 值        | 说明                     |
| ------ | --------- | ------------------------ |
| 草稿   | DRAFT     | 初始创建状态，可自由编辑 |
| 活跃   | ACTIVE    | 项目进行中，正常使用     |
| 已完成 | COMPLETED | 项目已完成，不可修改     |
| 已归档 | ARCHIVED  | 已归档，不可修改         |

---

**文档版本**: v1.0  
**最后更新**: 2025-11-07  
**维护人**: 海棠开发团队
