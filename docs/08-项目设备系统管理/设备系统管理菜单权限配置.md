# 设备系统管理模块 - 菜单权限配置

## 文档信息

- **版本**: v1.0
- **更新日期**: 2025-11-07
- **适用系统**: 海棠企业管理系统

---

## 目录

1. [菜单结构](#1-菜单结构)
2. [权限标识说明](#2-权限标识说明)
3. [菜单配置详情](#3-菜单配置详情)
4. [按钮权限配置](#4-按钮权限配置)
5. [配置步骤](#5-配置步骤)

---

## 1. 菜单结构

```
化盐工艺流程管理
  └─ 设备系统管理
       ├─ 设备系统模板管理
       └─ 项目设备系统管理
```

---

## 2. 权限标识说明

### 2.1 设备系统模板管理权限

| 权限标识                                         | 权限名称     | 对应功能       |
| ------------------------------------------------ | ------------ | -------------- |
| `erp:saltprocess:equipmentSystemTemplate:list`   | 查询模板列表 | 查看模板列表   |
| `erp:saltprocess:equipmentSystemTemplate:query`  | 查询模板详情 | 查看模板详情   |
| `erp:saltprocess:equipmentSystemTemplate:add`    | 新增模板     | 新增、复制模板 |
| `erp:saltprocess:equipmentSystemTemplate:edit`   | 修改模板     | 修改、发布模板 |
| `erp:saltprocess:equipmentSystemTemplate:remove` | 删除模板     | 删除模板       |
| `erp:saltprocess:equipmentSystemTemplate:export` | 导出模板     | 导出模板列表   |

### 2.2 项目设备系统管理权限

| 权限标识                                        | 权限名称         | 对应功能           |
| ----------------------------------------------- | ---------------- | ------------------ |
| `erp:saltprocess:projectEquipmentSystem:list`   | 查询设备系统列表 | 查看设备系统列表   |
| `erp:saltprocess:projectEquipmentSystem:query`  | 查询设备系统详情 | 查看设备系统详情   |
| `erp:saltprocess:projectEquipmentSystem:add`    | 新增设备系统     | 新增、复制设备系统 |
| `erp:saltprocess:projectEquipmentSystem:edit`   | 修改设备系统     | 修改、更新状态     |
| `erp:saltprocess:projectEquipmentSystem:remove` | 删除设备系统     | 删除设备系统       |
| `erp:saltprocess:projectEquipmentSystem:export` | 导出设备系统     | 导出设备系统列表   |

---

## 3. 菜单配置详情

### 3.1 一级菜单：设备系统管理

| 配置项   | 值               | 说明             |
| -------- | ---------------- | ---------------- |
| 菜单名称 | 设备系统管理     | 显示名称         |
| 菜单类型 | M (目录)         | 目录类型         |
| 路由地址 | equipment-system | 路由路径         |
| 显示状态 | 显示             | 是否在菜单中显示 |
| 菜单状态 | 正常             | 菜单状态         |
| 权限标识 | 无               | 目录无需权限标识 |
| 菜单图标 | system           | 图标名称         |
| 排序     | 根据实际情况设置 | 在父菜单下的排序 |

### 3.2 二级菜单：设备系统模板管理

| 配置项   | 值                                              | 说明             |
| -------- | ----------------------------------------------- | ---------------- |
| 菜单名称 | 设备系统模板管理                                | 显示名称         |
| 上级菜单 | 设备系统管理                                    | 父菜单           |
| 菜单类型 | C (菜单)                                        | 菜单类型         |
| 路由地址 | template                                        | 路由路径         |
| 组件路径 | erp/saltprocess/equipment-system/template/index | 组件路径         |
| 显示状态 | 显示                                            | 是否在菜单中显示 |
| 菜单状态 | 正常                                            | 菜单状态         |
| 权限标识 | `erp:saltprocess:equipmentSystemTemplate:list`  | 列表查询权限     |
| 菜单图标 | component                                       | 图标名称         |
| 排序     | 1                                               | 在父菜单下的排序 |

### 3.3 二级菜单：项目设备系统管理

| 配置项   | 值                                            | 说明             |
| -------- | --------------------------------------------- | ---------------- |
| 菜单名称 | 项目设备系统管理                              | 显示名称         |
| 上级菜单 | 设备系统管理                                  | 父菜单           |
| 菜单类型 | C (菜单)                                      | 菜单类型         |
| 路由地址 | list                                          | 路由路径         |
| 组件路径 | erp/saltprocess/equipment-system/index        | 组件路径         |
| 显示状态 | 显示                                          | 是否在菜单中显示 |
| 菜单状态 | 正常                                          | 菜单状态         |
| 权限标识 | `erp:saltprocess:projectEquipmentSystem:list` | 列表查询权限     |
| 菜单图标 | list                                          | 图标名称         |
| 排序     | 2                                             | 在父菜单下的排序 |

---

## 4. 按钮权限配置

### 4.1 设备系统模板管理按钮权限

#### 4.1.1 查看详情按钮

| 配置项   | 值                                              | 说明         |
| -------- | ----------------------------------------------- | ------------ |
| 按钮名称 | 查看详情                                        | 按钮显示名称 |
| 上级菜单 | 设备系统模板管理                                | 所属菜单     |
| 权限标识 | `erp:saltprocess:equipmentSystemTemplate:query` | 权限标识     |
| 按钮类型 | F (按钮)                                        | 功能类型     |

#### 4.1.2 新增模板按钮

| 配置项   | 值                                            | 说明         |
| -------- | --------------------------------------------- | ------------ |
| 按钮名称 | 新增模板                                      | 按钮显示名称 |
| 上级菜单 | 设备系统模板管理                              | 所属菜单     |
| 权限标识 | `erp:saltprocess:equipmentSystemTemplate:add` | 权限标识     |
| 按钮类型 | F (按钮)                                      | 功能类型     |

#### 4.1.3 修改模板按钮

| 配置项   | 值                                             | 说明         |
| -------- | ---------------------------------------------- | ------------ |
| 按钮名称 | 修改模板                                       | 按钮显示名称 |
| 上级菜单 | 设备系统模板管理                               | 所属菜单     |
| 权限标识 | `erp:saltprocess:equipmentSystemTemplate:edit` | 权限标识     |
| 按钮类型 | F (按钮)                                       | 功能类型     |

#### 4.1.4 删除模板按钮

| 配置项   | 值                                               | 说明         |
| -------- | ------------------------------------------------ | ------------ |
| 按钮名称 | 删除模板                                         | 按钮显示名称 |
| 上级菜单 | 设备系统模板管理                                 | 所属菜单     |
| 权限标识 | `erp:saltprocess:equipmentSystemTemplate:remove` | 权限标识     |
| 按钮类型 | F (按钮)                                         | 功能类型     |

#### 4.1.5 导出模板按钮

| 配置项   | 值                                               | 说明         |
| -------- | ------------------------------------------------ | ------------ |
| 按钮名称 | 导出模板                                         | 按钮显示名称 |
| 上级菜单 | 设备系统模板管理                                 | 所属菜单     |
| 权限标识 | `erp:saltprocess:equipmentSystemTemplate:export` | 权限标识     |
| 按钮类型 | F (按钮)                                         | 功能类型     |

### 4.2 项目设备系统管理按钮权限

#### 4.2.1 查看详情按钮

| 配置项   | 值                                             | 说明         |
| -------- | ---------------------------------------------- | ------------ |
| 按钮名称 | 查看详情                                       | 按钮显示名称 |
| 上级菜单 | 项目设备系统管理                               | 所属菜单     |
| 权限标识 | `erp:saltprocess:projectEquipmentSystem:query` | 权限标识     |
| 按钮类型 | F (按钮)                                       | 功能类型     |

#### 4.2.2 新增设备系统按钮

| 配置项   | 值                                           | 说明         |
| -------- | -------------------------------------------- | ------------ |
| 按钮名称 | 新增设备系统                                 | 按钮显示名称 |
| 上级菜单 | 项目设备系统管理                             | 所属菜单     |
| 权限标识 | `erp:saltprocess:projectEquipmentSystem:add` | 权限标识     |
| 按钮类型 | F (按钮)                                     | 功能类型     |

#### 4.2.3 修改设备系统按钮

| 配置项   | 值                                            | 说明         |
| -------- | --------------------------------------------- | ------------ |
| 按钮名称 | 修改设备系统                                  | 按钮显示名称 |
| 上级菜单 | 项目设备系统管理                              | 所属菜单     |
| 权限标识 | `erp:saltprocess:projectEquipmentSystem:edit` | 权限标识     |
| 按钮类型 | F (按钮)                                      | 功能类型     |

#### 4.2.4 删除设备系统按钮

| 配置项   | 值                                              | 说明         |
| -------- | ----------------------------------------------- | ------------ |
| 按钮名称 | 删除设备系统                                    | 按钮显示名称 |
| 上级菜单 | 项目设备系统管理                                | 所属菜单     |
| 权限标识 | `erp:saltprocess:projectEquipmentSystem:remove` | 权限标识     |
| 按钮类型 | F (按钮)                                        | 功能类型     |

#### 4.2.5 导出设备系统按钮

| 配置项   | 值                                              | 说明         |
| -------- | ----------------------------------------------- | ------------ |
| 按钮名称 | 导出设备系统                                    | 按钮显示名称 |
| 上级菜单 | 项目设备系统管理                                | 所属菜单     |
| 权限标识 | `erp:saltprocess:projectEquipmentSystem:export` | 权限标识     |
| 按钮类型 | F (按钮)                                        | 功能类型     |

---

## 5. 配置步骤

### 5.1 通过系统界面配置

#### 步骤 1：登录系统

1. 使用管理员账号登录系统
2. 进入"系统管理" → "菜单管理"

#### 步骤 2：创建一级菜单

1. 点击"新增"按钮
2. 填写菜单信息：
   - 菜单名称：设备系统管理
   - 上级菜单：化盐工艺流程管理
   - 菜单类型：目录
   - 路由地址：equipment-system
   - 菜单图标：system
   - 显示排序：根据实际情况设置
3. 点击"确定"保存

#### 步骤 3：创建设备系统模板管理菜单

1. 选择"设备系统管理"菜单，点击"新增"按钮
2. 填写菜单信息：
   - 菜单名称：设备系统模板管理
   - 上级菜单：设备系统管理
   - 菜单类型：菜单
   - 路由地址：template
   - 组件路径：erp/saltprocess/equipment-system/template/index
   - 权限标识：`erp:saltprocess:equipmentSystemTemplate:list`
   - 菜单图标：component
   - 显示排序：1
3. 点击"确定"保存

#### 步骤 4：创建设备系统模板管理按钮权限

为"设备系统模板管理"菜单添加以下按钮权限：

1. 查询模板详情：`erp:saltprocess:equipmentSystemTemplate:query`
2. 新增模板：`erp:saltprocess:equipmentSystemTemplate:add`
3. 修改模板：`erp:saltprocess:equipmentSystemTemplate:edit`
4. 删除模板：`erp:saltprocess:equipmentSystemTemplate:remove`
5. 导出模板：`erp:saltprocess:equipmentSystemTemplate:export`

#### 步骤 5：创建项目设备系统管理菜单

1. 选择"设备系统管理"菜单，点击"新增"按钮
2. 填写菜单信息：
   - 菜单名称：项目设备系统管理
   - 上级菜单：设备系统管理
   - 菜单类型：菜单
   - 路由地址：list
   - 组件路径：erp/saltprocess/equipment-system/index
   - 权限标识：`erp:saltprocess:projectEquipmentSystem:list`
   - 菜单图标：list
   - 显示排序：2
3. 点击"确定"保存

#### 步骤 6：创建项目设备系统管理按钮权限

为"项目设备系统管理"菜单添加以下按钮权限：

1. 查询设备系统详情：`erp:saltprocess:projectEquipmentSystem:query`
2. 新增设备系统：`erp:saltprocess:projectEquipmentSystem:add`
3. 修改设备系统：`erp:saltprocess:projectEquipmentSystem:edit`
4. 删除设备系统：`erp:saltprocess:projectEquipmentSystem:remove`
5. 导出设备系统：`erp:saltprocess:projectEquipmentSystem:export`

#### 步骤 7：分配角色权限

1. 进入"系统管理" → "角色管理"
2. 选择需要配置权限的角色
3. 点击"修改"按钮
4. 在"菜单权限"中勾选刚才创建的菜单和按钮权限
5. 点击"确定"保存

#### 步骤 8：验证权限配置

1. 使用配置了权限的账号登录系统
2. 验证菜单是否正常显示
3. 验证按钮权限是否生效

### 5.2 通过 SQL 脚本配置

> **注意**: 使用 SQL 脚本前，请先备份数据库。以下脚本仅供参考，实际执行时需要根据系统实际情况调整。

```sql
-- 1. 创建一级菜单：设备系统管理
INSERT INTO sys_menu (menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)
VALUES ('设备系统管理', (SELECT menu_id FROM sys_menu WHERE menu_name = '化盐工艺流程管理'), 1, 'equipment-system', NULL, 1, 0, 'M', '0', '0', NULL, 'system', 'admin', NOW(), '', NULL, '设备系统管理目录');

-- 2. 创建二级菜单：设备系统模板管理
INSERT INTO sys_menu (menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)
VALUES ('设备系统模板管理', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统管理'), 1, 'template', 'erp/saltprocess/equipment-system/template/index', 1, 0, 'C', '0', '0', 'erp:saltprocess:equipmentSystemTemplate:list', 'component', 'admin', NOW(), '', NULL, '设备系统模板管理菜单');

-- 3. 创建设备系统模板管理按钮权限
INSERT INTO sys_menu (menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)
VALUES
('查询模板详情', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统模板管理'), 1, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:equipmentSystemTemplate:query', '#', 'admin', NOW(), '', NULL, ''),
('新增模板', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统模板管理'), 2, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:equipmentSystemTemplate:add', '#', 'admin', NOW(), '', NULL, ''),
('修改模板', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统模板管理'), 3, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:equipmentSystemTemplate:edit', '#', 'admin', NOW(), '', NULL, ''),
('删除模板', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统模板管理'), 4, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:equipmentSystemTemplate:remove', '#', 'admin', NOW(), '', NULL, ''),
('导出模板', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统模板管理'), 5, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:equipmentSystemTemplate:export', '#', 'admin', NOW(), '', NULL, '');

-- 4. 创建二级菜单：项目设备系统管理
INSERT INTO sys_menu (menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)
VALUES ('项目设备系统管理', (SELECT menu_id FROM sys_menu WHERE menu_name = '设备系统管理'), 2, 'list', 'erp/saltprocess/equipment-system/index', 1, 0, 'C', '0', '0', 'erp:saltprocess:projectEquipmentSystem:list', 'list', 'admin', NOW(), '', NULL, '项目设备系统管理菜单');

-- 5. 创建项目设备系统管理按钮权限
INSERT INTO sys_menu (menu_name, parent_id, order_num, path, component, is_frame, is_cache, menu_type, visible, status, perms, icon, create_by, create_time, update_by, update_time, remark)
VALUES
('查询设备系统详情', (SELECT menu_id FROM sys_menu WHERE menu_name = '项目设备系统管理'), 1, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:projectEquipmentSystem:query', '#', 'admin', NOW(), '', NULL, ''),
('新增设备系统', (SELECT menu_id FROM sys_menu WHERE menu_name = '项目设备系统管理'), 2, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:projectEquipmentSystem:add', '#', 'admin', NOW(), '', NULL, ''),
('修改设备系统', (SELECT menu_id FROM sys_menu WHERE menu_name = '项目设备系统管理'), 3, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:projectEquipmentSystem:edit', '#', 'admin', NOW(), '', NULL, ''),
('删除设备系统', (SELECT menu_id FROM sys_menu WHERE menu_name = '项目设备系统管理'), 4, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:projectEquipmentSystem:remove', '#', 'admin', NOW(), '', NULL, ''),
('导出设备系统', (SELECT menu_id FROM sys_menu WHERE menu_name = '项目设备系统管理'), 5, '', NULL, 1, 0, 'F', '0', '0', 'erp:saltprocess:projectEquipmentSystem:export', '#', 'admin', NOW(), '', NULL, '');
```

---

## 6. 文件路径映射

### 6.1 前端文件路径

| 组件路径                                        | 实际文件路径                                                  |
| ----------------------------------------------- | ------------------------------------------------------------- |
| erp/saltprocess/equipment-system/template/index | src/views/erp/saltprocess/equipment-system/template/index.vue |
| erp/saltprocess/equipment-system/index          | src/views/erp/saltprocess/equipment-system/index.vue          |

### 6.2 API 文件路径

| API 模块         | 实际文件路径                                         |
| ---------------- | ---------------------------------------------------- |
| 设备系统模板 API | src/api/erp/saltprocess/equipment-system/template.ts |
| 项目设备系统 API | src/api/erp/saltprocess/equipment-system/index.ts    |
| 类型定义         | src/api/erp/saltprocess/equipment-system/types.ts    |

---

## 7. 权限验证

### 7.1 前端权限指令

在 Vue 模板中使用 `v-hasPermi` 指令控制按钮显示：

```vue
<!-- 新增按钮 -->
<el-button
  type="primary"
  @click="handleAdd"
  v-hasPermi="['erp:saltprocess:equipmentSystemTemplate:add']"
>
  新增模板
</el-button>

<!-- 修改按钮 -->
<el-button
  type="success"
  @click="handleUpdate"
  v-hasPermi="['erp:saltprocess:equipmentSystemTemplate:edit']"
>
  修改
</el-button>

<!-- 删除按钮 -->
<el-button
  type="danger"
  @click="handleDelete"
  v-hasPermi="['erp:saltprocess:equipmentSystemTemplate:remove']"
>
  删除
</el-button>
```

### 7.2 后端权限注解

在 Controller 中使用 `@SaCheckPermission` 注解控制接口访问：

```java
@SaCheckPermission("erp:saltprocess:equipmentSystemTemplate:list")
@GetMapping("/list")
public TableDataInfo<ErpSaltEquipmentSystemTemplateVO> list(ErpSaltEquipmentSystemTemplateQuery query) {
    // ...
}

@SaCheckPermission("erp:saltprocess:equipmentSystemTemplate:add")
@PostMapping
public R<Void> add(@Validated @RequestBody ErpSaltEquipmentSystemTemplateForm form) {
    // ...
}
```

---

**文档版本**: v1.0  
**最后更新**: 2025-11-07  
**维护人**: 海棠开发团队
