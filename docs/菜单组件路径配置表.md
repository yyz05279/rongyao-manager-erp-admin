# 菜单组件路径配置表

本文档提供所有缺少组件路径的菜单配置信息。

## 📋 需要配置的菜单列表

### 1. 化盐工艺流程相关

| 菜单名称 | 路由地址        | 组件路径                        | 状态        |
| -------- | --------------- | ------------------------------- | ----------- |
| 化盐记录 | record          | erp/saltprocess/records/index   | ✅ 组件存在 |
| 制盐任务 | making-task     | erp/saltprocess/saltmaking/task | ✅ 组件存在 |
| 预热任务 | preheating-task | erp/saltprocess/preheating/task | ✅ 组件存在 |

### 2. 系统监控相关

| 菜单名称 | 路由地址 | 组件路径               | 状态                                |
| -------- | -------- | ---------------------- | ----------------------------------- |
| PowerJob | powerjob | monitor/powerjob/index | ⚠️ 目录为空，需要创建组件或配置外链 |
| Admin    | Admin    | monitor/admin/index    | ⚠️ 目录为空，需要创建组件或配置外链 |

### 3. 系统工具相关

| 菜单名称 | 路由地址 | 组件路径         | 状态                                |
| -------- | -------- | ---------------- | ----------------------------------- |
| 表单构建 | build    | tool/build/index | ⚠️ 目录为空，需要创建组件或配置外链 |
| 代码生成 | gen      | tool/gen/index   | ⚠️ 目录为空，需要创建组件或配置外链 |

### 4. 子系统管理相关

| 菜单名称     | 路由地址      | 组件路径                          | 状态        |
| ------------ | ------------- | --------------------------------- | ----------- |
| 子项模板管理 | item-template | erp/subsystem/item-template/index | ✅ 组件存在 |
| 子系统模板   | template      | erp/subsystem/template/index      | ✅ 组件存在 |
| 子系统列表   | index         | erp/subsystem/index               | ✅ 组件存在 |

## 🔧 后台配置步骤

### 步骤 1：进入菜单管理

1. 登录后台管理系统
2. 进入：系统管理 → 菜单管理

### 步骤 2：编辑对应菜单

找到上表中列出的菜单，点击"修改"按钮

### 步骤 3：填写组件路径

在"组件路径"字段填入上表中对应的路径，例如：

```
erp/saltprocess/records/index
```

**注意**：

- 不要加开头的斜杠 `/`
- 不要加后缀 `.vue`
- 路径是相对于 `src/views/` 目录

### 步骤 4：保存配置

点击"确定"保存配置

### 步骤 5：清除缓存

退出登录后重新登录，确保配置生效

## 💡 特殊情况处理

### 外链类型菜单

如果某些菜单（如 PowerJob、Admin）是外链，需要：

1. **菜单类型**：选择"菜单 (C)"
2. **是否外链**：选择"是"
3. **路由地址**：填写完整的 URL，例如：
   ```
   http://localhost:7700
   ```
4. **组件路径**：留空或填写 `Layout`

### 待开发菜单

如果菜单对应的组件还未开发：

**选项 1：隐藏菜单**

- 将"显示状态"设置为"隐藏"
- 或将"菜单状态"设置为"停用"

**选项 2：创建占位页面**

创建简单的占位组件，例如创建 `src/views/monitor/powerjob/index.vue`：

```vue
<template>
  <div class="app-container">
    <el-result icon="info" title="功能开发中" sub-title="该功能正在开发中，敬请期待">
      <template #extra>
        <el-button type="primary" @click="$router.go(-1)">返回</el-button>
      </template>
    </el-result>
  </div>
</template>

<script setup name="PowerJob">
// 功能开发中
</script>
```

## 📝 前端映射表配置（临时方案）

如果暂时无法修改后台配置，可以在前端添加映射表：

编辑文件：`src/store/modules/permission.ts`

在 `componentPathMap` 对象中添加：

```typescript
const componentPathMap: Record<string, any> = {
  // 化盐工艺流程
  '/saltprocess/record': () => import('@/views/erp/saltprocess/records/index.vue'),
  'record': () => import('@/views/erp/saltprocess/records/index.vue'),
  '/saltprocess/making-task': () => import('@/views/erp/saltprocess/saltmaking/task.vue'),
  'making-task': () => import('@/views/erp/saltprocess/saltmaking/task.vue'),
  '/saltprocess/preheating-task': () => import('@/views/erp/saltprocess/preheating/task.vue'),
  'preheating-task': () => import('@/views/erp/saltprocess/preheating/task.vue'),

  // 子系统管理
  '/subsystem/item-template': () => import('@/views/erp/subsystem/item-template/index.vue'),
  'item-template': () => import('@/views/erp/subsystem/item-template/index.vue'),
  '/subsystem/template': () => import('@/views/erp/subsystem/template/index.vue'),
  'template': () => import('@/views/erp/subsystem/template/index.vue'),
  '/subsystem/index': () => import('@/views/erp/subsystem/index.vue'),
  'index': () => import('@/views/erp/subsystem/index.vue'),
};
```

**注意**：这只是临时方案，建议还是在后台正确配置。

## ✅ 验证方法

配置完成后，验证是否生效：

### 方法 1：检查控制台

登录后，打开浏览器控制台（F12），应该看到：

```
✅ 从静态路由获取 component: xxx
```

而不再是：

```
⚠️  无法为路由 xxx 找到 component
```

### 方法 2：访问页面

直接访问对应的路由地址，例如：

```
http://localhost/saltprocess/record
```

页面应该正常显示，而不是空白。

### 方法 3：检查路由

在浏览器控制台执行：

```javascript
console.log($router.getRoutes().find(r => r.path === '/saltprocess/record'));
```

应该能看到 `component` 属性不为 `undefined`。

## 📊 配置优先级

系统加载组件的优先级顺序：

1. **后台配置的组件路径**（最高优先级，推荐）
2. **前端静态路由配置**（自动匹配）
3. **前端映射表配置**（临时方案）

建议使用第 1 种方式，这样前后端配置统一，便于维护。

## 🎯 完成检查清单

配置完成后，检查以下项目：

- [ ] 所有菜单都填写了组件路径或配置为外链
- [ ] 退出重新登录，清除缓存
- [ ] 控制台没有"无法找到 component"的警告
- [ ] 所有菜单都可以正常访问
- [ ] 页面显示正常，无空白页

## 📚 相关文档

- [菜单权限配置图解](./07-子系统管理/菜单权限配置图解.md)
- [子系统管理模块使用指南](./07-子系统管理/子系统管理模块使用指南.md)

---

**最后更新**：2025-11-05  
**文档版本**：v1.0
